import{_ as v}from"./_plugin-vue_export-helper-c27b6911.js";import{a2 as f,a3 as b,m as _,o as i,f as a,b as p,c,a4 as u,g as l,t as w,z as m,n as h,r as x,a as g}from"./app-d9f75028.js";const z={name:"AthleteNode",setup(n,s){const e=f("renderer",null),r=f("size");return e===null&&b("renderer",s.slots),{renderer:e,size:r}},components:{slotProxy:{props:{renderer:{required:!0,type:Object},node:{required:!0,type:Object}},render(){return this.renderer.default(this.node)}}},props:{direction:{required:!0,type:String},node:{required:!0,type:Object},depth:{required:!1,type:Number,default:0},nodeWidth:{type:String,default:"100%"},nodeHeight:{type:Number,default:68},nodeGap:{type:Number,default:4},lineLength:{type:Number,default:64},lineWidth:{type:Number,default:1}},data(){return{athlete:null}},computed:{isLeaf(){return!this.node.is_bout},section(){return n=>Math.ceil(n/(this.size/4))}},methods:{$assignAthlete(){}}},N={key:1,class:"absolute right-16 top-1/2 -m-3 rounded-full bg-slate-300 h-6 w-6 flex items-center justify-center font-bold text-sm z-10"},A=["id"];function k(n,s,e,r,o,t){const d=_("athlete-node",!0),y=_("slot-proxy");return i(),a("div",{class:h(["node w-full relative",`direction-${e.direction} ${t.isLeaf?"is-leaf":""} depth-${e.depth}`]),style:m(`--line-length: ${e.lineLength}px; --line-width: ${e.lineWidth}px`)},[p("div",{class:h(["w-full wrapper h-full",`direction-${e.direction}`])},[e.node.prev_white?(i(),c(d,u({key:0},n.$props,{direction:e.direction,node:e.node.prev_white,class:"lhs",depth:e.depth+1}),null,16,["direction","node","depth"])):l("",!0),e.node.in_program_sequence?(i(),a("div",N,w(e.node.in_program_sequence),1)):l("",!0),e.node.prev_blue?(i(),c(d,u({key:2},n.$props,{direction:e.direction,node:e.node.prev_blue,class:"rhs",depth:e.depth+1}),null,16,["direction","node","depth"])):l("",!0),t.isLeaf?(i(),a("div",{key:3,class:"w-full h-full",style:m(`height: ${e.nodeHeight+e.nodeGap*2}px; padding: ${e.nodeGap}px 0;`)},[p("div",{id:`seat-${e.node.seat}`,class:h([`section-${r.size>2?"":"2-"}${t.section(e.node.seat)}`,"w-full h-full grid"])},[r.renderer?(i(),c(y,{key:0,renderer:r.renderer,node:e.node},null,8,["renderer","node"])):x(n.$slots,"default",{key:1},void 0,!0)],10,A)],4)):l("",!0)],2)],6)}const G=v(z,[["render",k],["__scopeId","data-v-e80f9274"]]);const q=3e3,L={name:"Chart",components:{AthleteNode:G},provide(){return{renderer:this.$slots,size:this.size}},props:{athletes:{required:!0,type:Array}},data(){return{cursor:0,depth:0,anim:null,root:{prev_white:{},prev_blue:{}}}},setup(n){return{size:Math.pow(2,Math.max((n.athletes.length-1).toString(2).length,1))}},mounted(){this.depth=Math.max((this.athletes.length-1).toString(2).length,2),console.debug("depth",this.depth),this.root=this.generateGraphDefinition()},computed:{nodeProps(){return{3:{nodeHeight:96,nodeGap:16},4:{nodeHeight:68,nodeGap:8},5:{nodeHeight:32,nodeGap:4},6:{nodeHeight:32,nodeGap:4}}[this.depth]??{nodeHeight:96,nodeGap:4,lineLength:64,lineWidth:2}}},methods:{generateGraphDefinition(){const n={};let s=[n];for(let e=1;e<=this.depth;++e){const r=[];let o=1;s.forEach(t=>{t.prev_white={},t.prev_blue={},t.is_bout=!0,e===this.depth&&(t.prev_white.seat=o++,t.prev_blue.seat=o++,t.prev_white.is_bout=!1,t.prev_blue.is_bout=!1),r.push(t.prev_white,t.prev_blue)}),s=r}return n},startAnim(){this.anim=setInterval(()=>{this.stopAnimIfDone(),this.assignAthlete()},q)},assignAthlete(){},stopAnimIfDone(){this.cursor===this.athletes.length&&clearInterval(this.anim)}}},H={class:"flex w-full h-full justify-center"},I={key:0,class:"rhs w-full relative"};function S(n,s,e,r,o,t){const d=_("athlete-node");return i(),a("div",H,[p("div",{class:h(["lhs relative",r.size>2?"w-full":"w-1/2"])},[g(d,u({direction:"left",node:o.root.prev_white,class:"root"},t.nodeProps),null,16,["node"])],2),r.size>2?(i(),a("div",I,[g(d,u({direction:"right",node:o.root.prev_blue,class:"root"},t.nodeProps),null,16,["node"])])):l("",!0)])}const D=v(L,[["render",S]]);export{D as default};
