import{A as B}from"./AdminLayout-ab9d13cb.js";import{C as O,P as Y,E as z,G as R,H as j,m as r,o as s,f as m,a,w as l,F as b,b as t,d as _,c as v,g as h,p as G,t as y,n as U,q,s as H}from"./app-d9f75028.js";import{d as J}from"./duration-526ae087.js";import{_ as K}from"./_plugin-vue_export-helper-c27b6911.js";import"./judoka-logo-eef90ab5.js";import"./VideoCameraOutlined-6422ac09.js";O.extend(J);const Q={components:{AdminLayout:B,PlusOutlined:Y,CloseCircleOutlined:z,ClockCircleOutlined:R},props:["gameTypes","languages"],data(){return{dateFormat:"YYYY-MM-DD",isEditing:!1,addWeight:"",removeCategories:"",newGameType:{is_language_secondary_enabled:0}}},created(){},methods:{reload(){this.$inertia.reload(["gameTypes"])},createNewGameType(){this.newGameType={is_language_secondary_enabled:0},this.newGameType.isCreateing=!0},saveCompetitionType(d){var o;console.log(d),(o=d.categories)==null||o.forEach(i=>i.editDuration=O.duration({minutes:i.duration.split(":")[0],seconds:i.duration.split(":")[1]}).asSeconds()),console.log(d),this.$inertia.post(route("manage.gameTypes.store"),d,{onSuccess(i){console.log(i)},onError(i){console.log(i)}})},addCategory(d){d.categories.push({id:1e8,code:"",game_type_id:d.id,name:"",weights:[],name_secondary:"",duartion:""}),d.editCategory=1e8},test(){console.log(this.gameTypes)},removeTag(d,o,i){o.weights=o.weights.filter(function(w){return w!==i})},removeCategory(d,o){d.removeCategories||(d.removeCategories=[]),d.removeCategories.push(o);const i=d.categories.findIndex(w=>w.id===o.id);i>=0&&d.categories.splice(i,1)},confirmAddWeight(d){this.addWeight.match(/^(FW|MW)(\d{1,3})(\+|-)$/)&&!d.weights.includes(this.addWeight)?(d.weights.push(this.addWeight),this.addWeight="",d.addWeight=!1):j.error("公斤格式錯誤或已有此公斤")}}},k=d=>(q("data-v-ea21d56f"),d=d(),H(),d),X={class:"py-12 mx-8 md:max-w-6xl xl:mx-auto"},Z={class:"mb-8 flex justify-between"},T=k(()=>t("div",{class:"text-xl font-bold"},"Competition types",-1)),$={class:"flex gap-6 sm:flex-row flex-col"},ee={class:"w-1/2"},ne=k(()=>t("p",{class:"underline font-bold"},"Type information",-1)),ae={class:"text-right"},le={class:"flex gap-6 sm:flex-row flex-col"},te={class:"w-1/2"},oe={key:1},se={key:1},de={key:0},ie=k(()=>t("p",{class:"underline font-bold"},"Type infomation",-1)),ue={class:"flex flex-col gap-3 w-1/2"},ce=k(()=>t("div",null,"Category and Weights",-1)),_e={class:"mb-2"},re={class:"pl-2 mt-2 text-sm text-blue-500"},me={class:"flex flex-col gap-3"},pe={class:""},ve=k(()=>t("div",null,"Code",-1)),fe={class:""},ge=k(()=>t("div",null,"Name",-1)),he={class:""},Ce=k(()=>t("div",null,"Name Secondary",-1)),ke={class:""},ye=k(()=>t("div",null,"Category duration",-1)),be={key:0},we=["onClick"],xe=["onClick"],Ge={key:0},Ue={key:0};function Ee(d,o,i,w,u,C){const F=r("inertia-head"),f=r("a-button"),x=r("a-select"),p=r("a-form-item"),E=r("a-switch"),g=r("a-input"),W=r("a-form"),N=r("a-card"),S=r("a-tag"),A=r("ClockCircleOutlined"),L=r("a-time-picker"),V=r("CloseCircleOutlined"),I=r("PlusOutlined"),P=r("a-space"),D=r("AdminLayout");return s(),m(b,null,[a(F,{title:"Game types"}),a(D,null,{default:l(()=>[t("div",X,[t("div",Z,[T,t("div",null,[a(f,{type:"primary",class:"bg-blue-500",onClick:C.createNewGameType,disabled:u.newGameType.isCreateing},{default:l(()=>[_("Create competition type")]),_:1},8,["onClick","disabled"])])]),u.newGameType.isCreateing?(s(),v(N,{key:0,title:"Create a new competition type"},{extra:l(()=>[a(f,{onClick:o[0]||(o[0]=e=>u.newGameType.isCreateing=!1)},{default:l(()=>[_("Cancel")]),_:1})]),default:l(()=>[t("div",$,[t("div",ee,[a(W,{id:"modalFrom",name:"ModalForm",ref:"formRef",model:u.newGameType,layout:"vertical",autocomplete:"off"},{default:l(()=>[a(p,{name:"language",label:"Language"},{default:l(()=>[a(x,{value:u.newGameType.language,"onUpdate:value":o[1]||(o[1]=e=>u.newGameType.language=e),options:i.languages,style:{width:"200px"}},null,8,["value","options"])]),_:1}),a(p,{label:"Open secondary language"},{default:l(()=>[a(E,{checked:u.newGameType.is_language_secondary_enabled,"onUpdate:checked":o[2]||(o[2]=e=>u.newGameType.is_language_secondary_enabled=e),unCheckedValue:0,checkedValue:1},null,8,["checked"])]),_:1}),u.newGameType.is_language_secondary_enabled==1?(s(),v(p,{key:0,name:"language",label:"Language Secondary"},{default:l(()=>[a(x,{value:u.newGameType.language_secondary,"onUpdate:value":o[3]||(o[3]=e=>u.newGameType.language_secondary=e),options:i.languages,style:{width:"200px"}},null,8,["value","options"])]),_:1})):h("",!0),ne,a(p,{name:"name",label:"Name"},{default:l(()=>[a(g,{type:"input",value:u.newGameType.name,"onUpdate:value":o[4]||(o[4]=e=>u.newGameType.name=e)},null,8,["value"])]),_:1}),a(p,{name:"name_secondary",label:"Name Secondary"},{default:l(()=>[a(g,{type:"input",value:u.newGameType.name_secondary,"onUpdate:value":o[5]||(o[5]=e=>u.newGameType.name_secondary=e)},null,8,["value"])]),_:1}),a(p,{name:"code",label:"Code"},{default:l(()=>[a(g,{type:"input",value:u.newGameType.code,"onUpdate:value":o[6]||(o[6]=e=>u.newGameType.code=e)},null,8,["value"])]),_:1})]),_:1},8,["model"])])]),t("div",ae,[a(f,{type:"primary",class:"bg-blue-500",onClick:o[7]||(o[7]=e=>C.saveCompetitionType(u.newGameType))},{default:l(()=>[_("Save")]),_:1})])]),_:1})):h("",!0),(s(!0),m(b,null,G(i.gameTypes,e=>(s(),v(N,{key:e.id,title:e.name,bordered:!1,class:"mb-4"},{extra:l(()=>[e.isEditing?(s(),v(f,{key:0,onClick:C.reload},{default:l(()=>[_("Cancel")]),_:1},8,["onClick"])):(s(),v(f,{key:1,onClick:n=>e.isEditing=!0},{default:l(()=>[_("Edit")]),_:2},1032,["onClick"]))]),default:l(()=>[t("div",le,[t("div",te,[a(W,{id:"modalFrom",name:"ModalForm",ref_for:!0,ref:"formRef",model:e,layout:"vertical",autocomplete:"off",disabled:!e.isEditing},{default:l(()=>[a(p,{name:"language",label:"Language"},{default:l(()=>[e.isEditing?(s(),v(x,{key:0,value:e.language,"onUpdate:value":n=>e.language=n,options:i.languages,style:{width:"200px"}},null,8,["value","onUpdate:value","options"])):(s(),m("p",oe,y(i.languages.find(n=>n.value==e.language).label),1))]),_:2},1024),e.isEditing?(s(),v(p,{key:0,label:"Open secondary language"},{default:l(()=>[a(E,{checked:e.is_language_secondary_enabled,"onUpdate:checked":n=>e.is_language_secondary_enabled=n,unCheckedValue:0,checkedValue:1},null,8,["checked","onUpdate:checked"])]),_:2},1024)):h("",!0),e.is_language_secondary_enabled==1?(s(),v(p,{key:1,name:"language",label:"Language Secondary"},{default:l(()=>[e.isEditing?(s(),v(x,{key:0,value:e.language_secondary,"onUpdate:value":n=>e.language_secondary=n,options:i.languages,style:{width:"200px"}},null,8,["value","onUpdate:value","options"])):(s(),m("p",se,[i.languages.find(n=>n.value==e.language_secondary)?(s(),m("span",de,y(i.languages.find(n=>n.value==e.language_secondary).label),1)):h("",!0)]))]),_:2},1024)):h("",!0),ie,a(p,{name:"name",label:"Name"},{default:l(()=>[a(g,{type:"input",value:e.name,"onUpdate:value":n=>e.name=n},null,8,["value","onUpdate:value"])]),_:2},1024),a(p,{name:"name_secondary",label:"Name secondary"},{default:l(()=>[a(g,{type:"input",value:e.name_secondary,"onUpdate:value":n=>e.name_secondary=n},null,8,["value","onUpdate:value"])]),_:2},1024),a(p,{name:"code",label:"Code"},{default:l(()=>[a(g,{type:"input",value:e.code,"onUpdate:value":n=>e.code=n},null,8,["value","onUpdate:value"])]),_:2},1024)]),_:2},1032,["model","disabled"])]),t("div",ue,[ce,(s(!0),m(b,null,G(e.categories,n=>(s(),m("div",{key:n.id},[t("div",_e,[a(S,null,{default:l(()=>[_(y(n.code),1)]),_:2},1024),_(" "+y(n.name)+" ",1),e.is_language_secondary_enabled?(s(),m(b,{key:0},[_(" / "+y(n.name_secondary),1)],64)):h("",!0),t("span",re,[a(A),_(" "+y(n.duration),1)]),e.isEditing?(s(),m(b,{key:1},[e.editCategory==n.id?(s(),v(f,{key:0,type:"link",onClick:c=>e.editCategory=null},{default:l(()=>[_(" Confirm ")]),_:2},1032,["onClick"])):(s(),v(f,{key:1,type:"link",onClick:c=>e.editCategory=n.id},{default:l(()=>[_(" Edit ")]),_:2},1032,["onClick"])),a(f,{type:"link",danger:"",onClick:c=>C.removeCategory(e,n)},{default:l(()=>[_(" Remove ")]),_:2},1032,["onClick"])],64)):h("",!0)]),t("div",me,[t("div",{class:U(["flex flex-col gap-6",e.editCategory==n.id?"block":"hidden"])},[t("div",pe,[ve,a(g,{type:"input",value:n.code,"onUpdate:value":c=>n.code=c},null,8,["value","onUpdate:value"])]),t("div",fe,[ge,a(g,{type:"input",value:n.name,"onUpdate:value":c=>n.name=c},null,8,["value","onUpdate:value"])]),t("div",he,[Ce,a(g,{type:"input",value:n.name_secondary,"onUpdate:value":c=>n.name_secondary=c},null,8,["value","onUpdate:value"])]),t("div",ke,[ye,a(L,{value:n.duration,"onUpdate:value":c=>n.duration=c,format:"mm:ss","value-format":"mm:ss"},null,8,["value","onUpdate:value"])])],2),t("div",null,[a(P,{size:[0,"small"],wrap:""},{default:l(()=>[(s(!0),m(b,null,G(n.weights,c=>(s(),v(S,{key:c,color:c[0]=="F"?"pink":"blue",closable:e.isEditing,onClose:M=>C.removeTag(M,n,c)},{default:l(()=>[_(y(c),1)]),_:2},1032,["color","closable","onClose"]))),128)),e.isEditing?(s(),m("div",be,[a(g,{class:U([n.addWeight==!0?"block":"hidden","w-28"]),value:u.addWeight,"onUpdate:value":o[8]||(o[8]=c=>u.addWeight=c),size:"small",onPressEnter:c=>C.confirmAddWeight(n)},{addonAfter:l(()=>[t("a",{onClick:c=>n.addWeight=!1},[a(V)],8,we)]),_:2},1032,["class","value","onPressEnter"]),t("a",{id:"weightInput",class:U(n.addWeight!=!0?"block":"hidden"),onClick:c=>n.addWeight=!0},[a(I)],10,xe)])):h("",!0)]),_:2},1024)])])]))),128)),e.isEditing==!0?(s(),m("div",Ge,[a(f,{onClick:n=>C.addCategory(e)},{default:l(()=>[_("Add category")]),_:2},1032,["onClick"])])):h("",!0)])]),e.isEditing?(s(),m("div",Ue,[a(f,{type:"primary",class:"bg-blue-500",danger:""},{default:l(()=>[_("Delete")]),_:1}),a(f,{type:"primary",class:"bg-blue-500",onClick:n=>C.saveCompetitionType(e)},{default:l(()=>[_("Save")]),_:2},1032,["onClick"])])):h("",!0)]),_:2},1032,["title"]))),128))])]),_:1})],64)}const Le=K(Q,[["render",Ee],["__scopeId","data-v-ea21d56f"]]);export{Le as default};
