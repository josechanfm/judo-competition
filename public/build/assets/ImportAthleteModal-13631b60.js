import{_ as x}from"./_plugin-vue_export-helper-c27b6911.js";import{D as y,m as n,o as l,c as k,w as i,b as d,a,d as c,f as r,F as v,p as C,t as _,g as F}from"./app-d9f75028.js";import{F as D,W as O}from"./WarningOutlined-db278ef6.js";const B={name:"ImportAthleteModal",components:{DownloadOutlined:y,FileExcelOutlined:D,WarningOutlined:O},data(){return{files:[],errors:[],imported:!1}},methods:{handleImport(){const e=new FormData;e.append("file",this.files[0].originFileObj),window.axios.post(route("admin.competitions.athletes.import"),e,{headers:{"Content-Type":"multipart/form-data"}}).then(({data:t})=>{this.$message.success("匯入成功"),this.files=[],this.errors=t.errors,this.imported=!0,this.$emit("imported")}).catch(()=>{this.$message.error("匯入失敗")})},handleFileChange(e){this.imported=!1,this.errors=[]}}},I={class:"ant-upload-drag-icon"},L=d("p",{class:"ant-upload-text"},"點擊或拖動文件到此以匯入運動員",-1),N=d("p",{class:"ant-upload-hint"},"支援 xlsx 文件上傳，上傳前請確認數據格式同模板相同",-1),V={key:0,class:"mt-3"},U={key:0,class:"font-bold my-3 text-green-500"},j={key:1,class:"font-bold my-3 text-yellow-500"},A={class:"flex w-full justify-between"},E={href:"/templates/athlete_list.xlsx"};function M(e,t,T,W,o,m){const f=n("file-excel-outlined"),u=n("a-upload-dragger"),h=n("warning-outlined"),g=n("DownloadOutlined"),p=n("a-button"),b=n("a-modal");return l(),k(b,{title:"匯入運動員名單",visible:e.visible,"onUpdate:visible":t[1]||(t[1]=s=>e.visible=s)},{footer:i(()=>[d("div",A,[d("a",E,[a(p,{type:"link"},{icon:i(()=>[a(g)]),default:i(()=>[c(" 下載運動員名單模板 ")]),_:1})]),a(p,{type:"primary",class:"bg-blue-500",onClick:m.handleImport,disabled:o.files.length===0},{default:i(()=>[c("匯入")]),_:1},8,["onClick","disabled"])])]),default:i(()=>[a(u,{fileList:o.files,"onUpdate:fileList":t[0]||(t[0]=s=>o.files=s),name:"file",onChange:m.handleFileChange,beforeUpload:()=>!1,multiple:!1},{default:i(()=>[d("p",I,[a(f)]),L,N]),_:1},8,["fileList","onChange"]),o.imported?(l(),r("div",V,[o.errors.length===0?(l(),r("div",U," 匯入成功！ ")):(l(),r("div",j,"部分資料未導入")),(l(!0),r(v,null,C(o.errors,(s,w)=>(l(),r("p",{key:w,class:"font-mono m-0"},[a(h,{class:"!text-yellow-500"}),c(" row "+_(s.row)+", "+_(s.errors[0]),1)]))),128))])):F("",!0)]),_:1},8,["visible"])}const G=x(B,[["render",M]]);export{G as default};
