import{P as I}from"./ProgramLayout-1d440752.js";import{_ as O}from"./_plugin-vue_export-helper-c27b6911.js";import{m as n,o as u,f as b,a as e,w as t,F as y,b as o,d as m,c as v,t as N,g as x}from"./app-d9f75028.js";import"./judoka-logo-eef90ab5.js";import"./VideoCameraOutlined-6422ac09.js";const S={props:["competition","programs","teams"],data(){return{modal:{isOpen:!1,mode:null,title:"Record Modal",data:{}},columns:[{title:"Abbreviation",dataIndex:"abbreviation"},{title:"Name",dataIndex:"name"},{title:"Name Secondary",dataIndex:"name_secondary"},{title:"Operation",dataIndex:"operation"}],rules:{abbreviation:{required:!0},name:{required:!0}},validateMessages:{required:"${label} is required!",types:{email:"${label} is not a valid email!",number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}}}},components:{ProgramLayout:I},computed:{isEdit(){return l=>l.id===this.form.id}},methods:{onCreateRecord(){this.modal.title="Create",this.modal.data={},this.modal.mode="CREATE",this.modal.isOpen=!0},onEditRecord(l){this.modal.title="Edit",this.modal.mode="EDIT",this.modal.data={...l},this.modal.isOpen=!0},deleteTeam(l){window.axios.delete(route("admin.contests.teams.destroy",[this.contest.id,l])).then(()=>{this.$message.success(trans("team.deleted"))}).catch(()=>{this.$message.error(trans("action.delete-failed"))}).finally(()=>{this.table.reload()})},onCreate(){this.$refs.formRef.validateFields().then(()=>{this.$inertia.post(route("manage.competition.teams.store",this.competition.id),this.modal.data,{onSuccess:l=>{this.modal.data={},this.modal.isOpen=!1},onError:l=>{console.log(l)}}),console.log("values",this.modal.data,this.modal.data)}).catch(l=>{console.log(l)})},onUpdate(){this.$refs.formRef.validateFields().then(()=>{this.$inertia.put(route("manage.competition.teams.update",{competition:this.competition.id,team:this.modal.data.id}),this.modal.data,{onSuccess:l=>{this.modal.data={},this.modal.isOpen=!1},onError:l=>{console.log(l)}}),console.log("values",this.modal.data,this.modal.data)}).catch(l=>{console.log("error",l)})}}},T=o("div",{class:"mx-4 py-4"},[o("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"},"運動員列表")],-1),U={class:"py-12 mx-8"},A={class:"overflow-hidden flex flex-col gap-3"},F={class:"grid grid-cols-4 gap-12 py-4"},L={class:"p-4 mb-2 shadow-lg bg-white rounded-lg"},P={class:"flex justify-between"},q=o("div",{class:"text-xl font-bold pb-2"},"Teams List",-1),B={class:"flex gap-3"},D={class:"flex flex-col"},M={class:"flex justify-between gap-3"},V={class:"w-1/2"},j={class:"w-1/2"},z={class:"flex justify-between gap-3"},G={class:"w-1/2"},H={class:"w-1/2"},J={class:"text-right"};function K(l,i,d,Q,a,_){const w=n("inertia-head"),p=n("a-statistic"),f=n("a-card"),r=n("a-button"),C=n("a-table"),h=n("a-input"),c=n("a-form-item"),k=n("a-form"),E=n("a-modal"),R=n("ProgramLayout");return u(),b(y,null,[e(w,{title:"運動員列表"}),e(R,{competitionId:d.competition.id},{header:t(()=>[T]),default:t(()=>[o("div",U,[o("div",A,[o("div",F,[e(f,{class:"shadow-lg"},{default:t(()=>[e(p,{title:"Status",value:"Ready to start"})]),_:1}),e(f,{class:"shadow-lg"},{default:t(()=>[e(p,{title:"Date",value:d.competition.date_start+" ~ "+d.competition.date_end},null,8,["value"])]),_:1}),e(f,{class:"shadow-lg"},{default:t(()=>[e(p,{title:"Programs",value:d.programs.length},null,8,["value"])]),_:1}),e(f,{class:"shadow-lg"},{default:t(()=>[e(p,{title:"Atheles",value:d.competition.athletes.length},null,8,["value"])]),_:1})]),o("div",L,[o("div",P,[q,o("div",B,[e(r,{type:"primary",class:"bg-blue-500",onClick:_.onCreateRecord},{default:t(()=>[m("Add team")]),_:1},8,["onClick"])])]),e(C,{dataSource:d.teams,columns:a.columns},{bodyCell:t(({column:s,record:g})=>[s.dataIndex==="operation"?(u(),v(r,{key:0,onClick:W=>_.onEditRecord(g)},{default:t(()=>[m("Edit")]),_:2},1032,["onClick"])):(u(),b(y,{key:1},[m(N(g[s.dataIndex]),1)],64))]),_:1},8,["dataSource","columns"])])])]),e(E,{open:a.modal.isOpen,"onUpdate:open":i[5]||(i[5]=s=>a.modal.isOpen=s),width:"1000px",footer:null,title:a.modal.title},{default:t(()=>[e(k,{name:"ModalForm",ref:"formRef",model:a.modal.data,layout:"vertical",autocomplete:"off",rules:a.rules,"validate-messages":a.validateMessages},{default:t(()=>[o("div",D,[o("div",M,[o("div",V,[e(c,{label:"Abbreviation",name:"abbreviation"},{default:t(()=>[e(h,{type:"input",value:a.modal.data.abbreviation,"onUpdate:value":i[0]||(i[0]=s=>a.modal.data.abbreviation=s)},null,8,["value"])]),_:1})]),o("div",j,[e(c,{label:"Name",name:"name"},{default:t(()=>[e(h,{type:"input",value:a.modal.data.name,"onUpdate:value":i[1]||(i[1]=s=>a.modal.data.name=s)},null,8,["value"])]),_:1})])]),o("div",z,[o("div",G,[e(c,{label:"Name Secondary",name:"name_secondary"},{default:t(()=>[e(h,{type:"input",value:a.modal.data.name_secondary,"onUpdate:value":i[2]||(i[2]=s=>a.modal.data.name_secondary=s)},null,8,["value"])]),_:1})]),o("div",H,[e(c,{label:"Leader",name:"leader"},{default:t(()=>[e(h,{type:"input",value:a.modal.data.leader,"onUpdate:value":i[3]||(i[3]=s=>a.modal.data.leader=s)},null,8,["value"])]),_:1})])]),o("div",J,[e(c,null,{default:t(()=>[a.modal.mode=="CREATE"?(u(),v(r,{key:0,class:"bg-blue-500",type:"primary",onClick:_.onCreate},{default:t(()=>[m("創建")]),_:1},8,["onClick"])):x("",!0),a.modal.mode=="EDIT"?(u(),v(r,{key:1,class:"bg-blue-500",type:"primary",onClick:_.onUpdate},{default:t(()=>[m("確定")]),_:1},8,["onClick"])):x("",!0),e(r,{style:{"margin-left":"10px"},onClick:i[4]||(i[4]=s=>a.modal.isOpen=!1)},{default:t(()=>[m("關閉")]),_:1})]),_:1})])])]),_:1},8,["model","rules","validate-messages"])]),_:1},8,["open","title"])]),_:1},8,["competitionId"])],64)}const te=O(S,[["render",K]]);export{te as default};
